<div class="container">
  <div class="row">
    <% if @invoices.size > 0 %>
      <div class="col-md-12 mb-3">
        <h1>Invoices</h1>
        <div class="table-responsive">
          <table class="table table-borderless">
            <thead>
              <tr>
                <th colspan="6">Episdoes</th>
                <th colspan="3">User</th>
                <th colspan="3">Manage</th>
              </tr>
            </thead>

            <tbody>
              <% @invoices.each do |invoice| %>
                <tr>
                  <td scope="row" colspan="6">
                    <% invoice.episodes.each do |episode| %>
                      <%= episode.title %><br>
                    <% end %>
                  </td>
                  <td colspan="3">
                    <% invoice.users.each do |u| %>
                      <% if u.role == "producer" %>
                        <%= "#{u.name.to_s.capitalize}<br>".html_safe unless u.name.nil? %>
                      <% end %>
                    <% end %>
                  </td>
                  <td colspan="3">
                    <%= link_to invoice do %>
                      <%= material_icon.remove_red_eye %>
                    <% end %>
                    <%= link_to edit_invoice_path(invoice) do %>
                      <%= material_icon.edit %>
                    <% end %>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div>
    <% else %>
      <div class="col-md-6 offset-md-3 mb-2 text-center mb-5">
        <p>No invoices are currently associated with your account.</p>
        <p>An invoice will be automatically generated based on the episodes you produced last month.</p>
        <p>Thanks for working with Freedom Podcasting.</p>
      </div>
    <% end %>

    <br>
    <% if current_user.role == "administrator" %>
      <div class="col-md-6 offset-md-3 mb-2 text-center mb-5">

        <%= link_to 'New Invoice', new_invoice_path, class: "btn btn-primary btn-block" %>
      </div>
    <% end %>
  </div>
</div>
